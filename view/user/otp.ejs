<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Verification</title>
</head>
<body style="padding-left: 591px; padding-top: 52px; margin-top: 77px;" >
    <div>
        <h1 style="    margin-left: 48px;">OTP Verification</h1>
    </div>
  
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>OTP Verification</title>
        <!-- Bootstrap CSS -->
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <style>
            /* Custom CSS */
            .otp-input {
                width: 40px;
                height: 40px;
            }
            .otp-label {
                margin-top: 72px;
            }
            .resend-link {
                margin-left: 121px;
            }
            .verify-btn {
                margin-left: 147px;
                margin-top: 42px;
            }
            /* Adjustments for smaller screens */
            @media (max-width: 576px) {
                .verify-btn {
                    margin-top: 12px; /* Adjust margin for smaller screens */
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <form action="/otp" method="post" style="margin-top: 46px;">
                <p style="margin-left: 131px;color: red;"><%= errorOtp %></p>
                <input type="hidden" value="<%= email %>" name="email">
                <div style="margin-left: 86px;" class="form-group d-flex">
                    <input class="form-control otp-input" type="text" id="otp16" name="otp1" style="width: 195px;" required>
                    <!-- <input class="form-control otp-input" type="text" id="otp2" name="otp2" required>
                    <input class="form-control otp-input" type="text" id="otp3" name="otp3" required>
                    <input class="form-control otp-input" type="text" id="otp4" name="otp4" required> -->
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary verify-btn" id="verifyBtn">Verify</button>
                </div>
            </form>
            <div style="margin-top: 10px;" class="form-group">
                <span id="timer" style="margin-left: 128px;"></span>
                <button onclick="window.location.href='/resend?email=<%= email %>'" id="resendLink" disabled>RESEND OTP</button>
            </div>
        </div>
        
        <script>
            // Countdown timer setup
            var timerElement = document.getElementById('timer');
            var resendLink = document.getElementById('resendLink');
            var countdown = 60; // 60 seconds countdown
            var countdownInterval;
            var resendDisabled = false;
        
            function startTimer() {
                // Start countdown
                countdownInterval = setInterval(function() {
                    if (countdown > 0) {
                        timerElement.textContent = countdownFormat(countdown);
                        countdown--;
                    } else {
                        clearInterval(countdownInterval);
                        timerElement.textContent = '';
                        // Enable the resend link here if needed
                        resendDisabled = false;
                        resendLink.classList.remove('disabled');
                    }
                }, 1000);
            }
        
            function countdownFormat(seconds) {
                var min = Math.floor(seconds / 60);
                var sec = seconds % 60;
                return min + ':' + (sec < 10 ? '0' : '') + sec;
            }
        
            // Start the timer when the page loads or OTP is sent
            startTimer();
        
            // Handle resend link click
            setTimeout(function() {
                        resendDisabled = false;
                        resendLink.disabled = false
                    }, 60000);
            // resendLink.addEventListener('click', function(event) {
            //     event.preventDefault();
            //     if (!resendDisabled) {
            //         resendDisabled = true;
            //         resendLink.classList.add('disabled');
            //         // Disable link for 60 seconds
            //          // 60 seconds
            //         // Example: window.location.href = this.href;
            //     }
            // });
        
            // Example of setting OTP in cookie
            function setCookie(name, value, days) {
                var expires = '';
                if (days) {
                    var date = new Date();
                    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                    expires = '; expires=' + date.toUTCString();
                }
                document.cookie = name + '=' + (value || '') + expires + '; path=/';
            }
        
            var otp = '1234'; // Replace with actual OTP value
            setCookie('otp', otp, 1); // Store OTP in cookie for 1 day (adjust as needed)
        </script>        
</body>
</html>
