<!DOCTYPE html>
<html lang="en">


<!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Molla - Bootstrap eCommerce Template</title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="Molla - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="assets/images/icons/site.html">
    <link rel="mask-icon" href="assets/images/icons/safari-pinned-tab.svg" color="#666666">
    <link rel="shortcut icon" href="assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <!-- axios cdn link -->
      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
      <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
      <!-- view detail modal -->
         <!-- sweetalert link -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .custom-swal-width {
           width: 421px; /* or any other larger value */
             /* width: 100%; */
             height: 298px;
         }
     </style>
      <style>
        .modal-header {
          background-color:#e5f0fb;
          color: white;
        }
        .modal-body span {
          font-weight: bold;
        }
        .modal-body input, .modal-body select {
          margin-top: 10px;
        }
      </style>
</head>

<body>
    <div class="page-wrapper">
        <header class="header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                       
                      

                    <div class="header-right">
                        
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-top -->

            <div class="header-middle sticky-header">
                <div class="container">
                    <div class="header-left">
                       

                        <a href="/" class="logo">
                            <img src="assets/images/logo.png" alt="Molla Logo" width="105" height="25">
                        </a>

                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li class="megamenu-container">
                                    <a href="/" class="sf-with">Home</a>

                                   
                                </li>
                                <li>
                                    <a href="/shope" class="sf-with">Shop</a>

                                    
                                </li>
                                <li>
                                    <a href="" class="sf-with">Product</a>

                                    
                                <li>
                                    <a href="" class="sf-with">Pages</a>

                                    
                                </li>
                                <li>
                                    <a href="" class="sf-with">Blog</a>

                                    
                                </li>
                                <li>
                                    <a href="" class="sf-with">Elements</a>

                                    
                                </li>
                            </ul><!-- End .menu -->
                        </nav><!-- End .main-nav -->
                    </div><!-- End .header-left -->

                    <div class="header-right">
                     


                        <div class="dropdown cart-dropdown">
                            <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static">
                                <i class="icon-shopping-cart"></i>
                                <span class="cart-count">2</span>
                            </a>

                            <div class="dropdown-menu dropdown-menu-right">
                                

                              

                                <div class="dropdown-cart-action">
                                    <a href=/cart class="btn " style="background-color: #cc9966;">View Cart</a>
                                    <a href=/checkout class="btn btn-outline-primary-2"><span>Checkout</span><i class="icon-long-arrow-right"></i></a>
                                </div>
                            </div><!-- End .dropdown-menu -->
                        </div><!-- End .cart-dropdown -->
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-middle -->
        </header><!-- End .header -->

        <main class="main">
        	<div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
                    <div class="container">
                        <h1 class="page-title">My Account<span>Shop</span></h1>
                    </div><!-- End .container -->
                </div><!-- End .page-header -->
                <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
                    <div class="container">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                            <li class="breadcrumb-item"><a href="/shope">Shop</a></li>
                            <li class="breadcrumb-item active" aria-current="page">My Account</li>
                        </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
            	<div class="dashboard">
	                <div class="container">
	                	<div class="row">
	                		<aside class="col-md-4 col-lg-3">
	                			<ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
								    <li class="nav-item">
								        <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="true">Dashboard</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
								    </li>
								   
								    <li class="nav-item">
								        <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-wallet-link" data-toggle="tab" href="#tab-wallet" role="tab" aria-controls="tab-wallet" aria-selected="false">wallet</a>
								    </li>
								   
								    <li class="nav-item">
								        <!-- <a class="nav-link" href="#">Sign Out</a> -->
                                            <% if(userData){ %>
                        
                                            <!-- <a href="/homeLogout" style="color: #000;;"><img src="/userImages/logout.png"  style="max-width: 44px;margin-right: 41px;" alt="">Logout</a> -->
                                            <a class="nav-link" href="javascript:void(0)" id="logout" alt="">Logout</a>                        
                                     
                    
                                 <%  } %>
								    </li>
								</ul>
	                		</aside><!-- End .col-lg-3 -->

	                		<div class="col-md-8 col-lg-9">
	                			<div class="tab-content">
                                    

                                 
								    <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
								    	<p style="font-size: xx-large;">Hello,<%=userData.name%> </p>
								    	<p>Email : <%=userData.email%></p>
                                        <p>Phone no : <%=userData.mobile%></p>
                                        <a href="/changePassword"><p style="color: red;">change your Password?</p></a>

                                        <div class="container mt-5">
                                            <a href="/editProfile">
                                                <button class="btn btn-primary edit-profile-btn">Edit profile</button>
                                            </a>
                                        </div>
                                        
								    </div><!-- .End .tab-pane -->
                                  

                                  

								    <div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
								    	<!-- <p>No order has been made yet.</p> -->
								    	<!-- <a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a> -->

                                        <div>
                                            <style>
                                                .order-list {
                                                    margin: 20px;
                                                }
                                                .order-item {
                                                    border: 1px solid #ddd;
                                                    padding: 15px;
                                                    margin-bottom: 10px;
                                                    display: flex;
                                                    align-items: center;
                                                }
                                                .product-image {
                                                    width: 100px;
                                                    height: 100px;
                                                    margin-right: 20px;
                                                }
                                                .product-info {
                                                    flex-grow: 1;
                                                }
                                                .order-actions {
                                                    display: flex;
                                                    flex-direction: column;
                                                }
                                                .order-actions button {
                                                    margin: 5px 0;
                                                }
                                            </style>
<% if(orders.length>0){ %>
    <p id="OpenId" hidden><%= OpOrder %></p>
    <% orders.forEach((ord, index) => { %>
        <div class="order-list" style="border: 1px solid black;">
            <% ord.orderdProducts.forEach((product) => { %>
                <div class="order-item" id="orderid">
                    <img src="<%= product.product.images[0] && product.product.images[0].startsWith('http') ? product.product.images[0] : ('/userImages/' + product.product.images[0]) %>" alt="Product Image" class="product-image">    
                    <div class="product-info">
                        <h5><%= product.product.name %></h5>
                    </div>
                    <div style="margin-right: 209px;">
                        <p>Status: <%= product.status %></p>
                    </div>

                    <% if(product.status !== 'delivered' && product.status !== 'cancelled' && product.status !== 'Failed' && product.status !== 'Returned') { %>
                        <div class="order-actions">
                            <button class="btn btn-danger" onclick="cancel('<%= product.product.name %>', '<%= product._id %>')">Cancel</button>
                         
                        </div>
                    <% } %>
                    <% if(product.status == 'Failed'){ %>
                     <button class="btn-primary" style="margin-left: 41px; border-radius: 20px;" onclick="retry('<%=ord.subTotal%>','<%=ord.orderId%>')" data-toggle="modal" data-target="#viewOrderDetails"> Retry  </button>
                    <% } %>
                    <% if(product.status === 'delivered') { %>
                        <button style="width: 5em; font-size: small; border-radius: 10px; border: 1px solid #eea287; background-color: white;" data-toggle="modal" data-target="#returnModal<%= product._id %>">Return</button>
                      
                    <% } %>

                    <!-- Return Modal -->
                    <div class="modal fade" id="returnModal<%= product._id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content p-4" style="border-radius: 20px;">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="exampleModalLongTitle">Return</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body pl-3 pr-3">
                                    <form id="ReturnId" action="/ReturnOrder" method="post">
                                        <div class="form-group p-4">
                                            <label for="wallet_amount">Enter the reason for returning <strong style="color: black;"><%= product.product.name %></strong>*</label>
                                            <input type="text" name="product_id" value="<%= product._id %>" hidden>
                                            <input type="text" name="product" value="<%= product.product._id %>" hidden>
                                            <input type="text" class="form-control" id="return_reason" name="reason" style="border-radius: 10px;" autocomplete="off">
                                            <span id="return_reason_error" class="error-message" style="color: red; font-size: smaller;"></span>
                                        </div>
                                </div>
                                <div class="modal-footer mx-auto">
                                    <button type="button" class="btn btn-outline-primary-2" data-dismiss="modal" style="border-radius: 10px; height: 2.9em;">
                                        Close
                                    </button>
                                    <button type="submit" style="border-radius: 10px;" class="btn btn-primary">Submit</button>
                                </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            <% }) %>

            <div class="modal fade" id="viewOrderDetails<%= index %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Order Details</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <% ord.orderdProducts.forEach((ordData) => { %>
                                <div style="display: flex;" class="product-info">
                                    <img style="width: 116px;" src="<%= ordData.product.images[0] && ordData.product.images[0].startsWith('http') ? ordData.product.images[0] : ('/userImages/' + ordData.product.images[0]) %>" alt="">
                                    <div>
                                        <h5><strong>Name:</strong> <%= ordData.product.name %></h5>
                                        <h5><strong>Price:</strong> <%= ordData.product.price %></h5>
                                        <h5><strong>Quantity:</strong> <%= ordData.quantity %></h5>
                                        <h5><strong>Total amount:</strong> <%= ordData.totalPrice %></h5>
                                    </div>
                                    <div>
                                        <h5><strong>Status:</strong> <%= ordData.status %></h5>
                                        <h5><strong>OrderId:</strong> <%= ord.orderId %></h5>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                        <h5><strong>SubTotal:</strong> <%= ord.subTotal %></h5>
                        <div style="display: flex;">
                            <h5><strong>FirstName:</strong> <%= ord.shipAddress.firstName %></h5>
                            <h5 style="margin-left: 70px;"><strong>LastName:</strong> <%= ord.shipAddress.lastName %></h5>
                        </div>
                        <div style="display: flex;">
                            <h5><strong>country:</strong> <%= ord.shipAddress.country %></h5>
                            <h5 style="margin-left: 70px;"><strong>streetName:</strong> <%= ord.shipAddress.streetName %></h5>
                        </div>
                        <div style="display: flex;">
                            <h5><strong>Town:</strong> <%= ord.shipAddress.town %></h5>
                            <h5 style="margin-left: 70px;"><strong>State:</strong> <%= ord.shipAddress.state %></h5>
                        </div>
                        <div style="display: flex;">
                            <h5><strong>Postcode:</strong> <%= ord.shipAddress.postCode %></h5>
                            <h5 style="margin-left: 70px;"><strong>Phone number:</strong> <%= ord.shipAddress.phone %></h5>
                        </div>
                        <div style="display: flex;">
                            <h5><strong>Postcode:</strong> <%= ord.shipAddress.postCode %></h5>
                            <h5 style="margin-left: 70px;"><strong>Phone number:</strong> <%= ord.shipAddress.phone %></h5>
                            
                        </div>
                        <div>
                            <h5 ><strong>Email:</strong> <%= ord.shipAddress.email %></h5>
                        </div>
                        
                        <!-- Additional shipping details here -->
                    </div>
                </div>
            </div>

            <p><%= ord.purchaseData %></p>
            <button class="btn btn-primary" style="margin-left: 592px;" data-toggle="modal" data-target="#viewOrderDetails<%= index %>">View Detail</button>
            <% if(ord.orderdProducts[0].status == 'delivered') { %>
            <a href="/invoice?id=<%= ord.orderId %>">
                <button class="btn-primary" style="margin-left: 41px; border-radius: 20px;" data-toggle="modal" data-target="#viewOrderDetails">
                    INVOICE
                </button>
            </a>
            <% } %>
        </div>
    <% }) %>
<% } else { %>
    <p>No Orders</p>
<% } %>


                                        </div>

                                       
                                      


								    </div><!-- .End .tab-pane -->
                                    
                                    <script>


                                        function passReturnpId(productId){
                                         const returnData=document.getElementById('returnPId').value = productId
                                        }
                                    </script>

                                    

                                   

                              
                             
								    <div class="tab-pane fade" id="tab-wallet" role="tabpanel" aria-labelledby="tab-wallet-link">
                                        
                                        
								    	
                                        <div class="card card-dashboard shadow-lg" style="border-radius: 20px;width: 361px; ">
                                            <div class="card-body">
                                                <div class="d-flex ">   
                                                   <% if(walletData){%>

                                                    <strong style="color: #000000; font-size: medium;">Balance: ₹</strong><p style="color: #00b530; font-size: medium;" id="wallet_balance"><%=Math.floor(walletData.balance )  %></p>
                                                 <%  }else{%>
                                                    
                                                    <strong style="color: #000000; font-size: medium;">Balance: ₹</strong><p style="color: #00b530; font-size: medium;" id="wallet_balance">NO BALANCE</p>
                                                 <%} %>

                                                 
                                                </div>
                                                <div class="d-flex">
                                                    <% if(walletData){%>
                                                    <a href="/addWallet" class="btn btn-outline-primary-2 mx-auto" style="border-radius: 10px;" data-toggle="modal" data-target="#withdrawModalCenter">
                                                        <span>Withdraw</span>
                                                        <i class="icon-long-arrow-right"></i>
                                                    </a>
                                                    <%  }else{%>
                                                        
                                                        <%} %>
                                                    <a  class="btn btn-outline-primary-2 mx-auto" style="border-radius: 10px;" data-toggle="modal" data-target="#viewModalCenter">
                                                        <span>View history</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        
                                          

                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
                                            ADD AMOUNT
                                          </button>
                                       
                                        

                                        

  

  <div class="modal fade" id="viewModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Withdraw Money</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <% if (walletData && walletData.transactionHistory.length > 0) { %>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead class="thead-dark">
                            <tr>
                                <th>No.</th>
                                <th>Amount</th>
                                <th>Date</th>
                                <th>Payment Method</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% walletData.transactionHistory.forEach((data, index) => { %>
                                <tr>
                                    <td><%= index + 1 %></td>
                                    <td><%= data.amount %></td>
                                    <td><%= data.date %></td>
                                    <td><%= data.paymentMethod %></td>
                                    <td><%= data.status %></td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            <% } else { %>
                <p class="text-center">No Wallet Data</p>
            <% } %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
        </div>
      </div>
    </div>
  </div>
                                         
                                          

<form id="walletForm" action="" method="post">
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="border-radius: 14px;">
          <div class="modal-header" style="border-radius: 8px;">
            <h5 class="modal-title" id="exampleModalLongTitle">DEPOSIT MONEY</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <span>Enter Amount</span>
            <div>
              <input type="text" id="wallet_amount" class="form-control" name="amount" placeholder="Enter amount">
              <span id="wallet_amount_error" class="error-message" style="color: red; font-size: smaller;"></span>
            </div>
            <div>
              <span>Select Payment Method</span>
              <select class="form-control" name="selectwallet" id="paymentMethod" style="width: 100%;">
                <option value="">Select</option>
                <option value="phonePay">PhonePe</option>
                <option value="gPay">GPay</option>
                <option value="paytm">Paytm</option>
              </select>
              <span id="paymentMethod_error" class="error-message" style="color: red; font-size: smaller;"></span>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="wallet_close" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary" id="depositButton">Deposit</button>
          </div>
        </div>
      </div>
    </div>
  </form>

  <form id="walletWithdrawForm" action="" method="post">
    <div class="modal fade" id="withdrawModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="border-radius: 14px;">
          <div class="modal-header" style="border-radius: 8px;">
            <h5 class="modal-title" id="exampleModalLongTitle">WITHDRAW MONEY</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <span>Enter Amount</span>
            <div>
              <input type="text" id="wallet_withdraw_amount" class="form-control" name="amount" placeholder="Enter amount">
                <span id="wallet_amount_withdraw_error" class="error-message" style="color: red; font-size: smaller;"></span>
                </div>
                <div>
                <span>Select Payment Method</span>
                <select class="form-control" name="selectwallet" id="paymentMethod_withdraw" style="width: 100%;">
                    <option value="">Select</option>
                    <option value="phonePay">PhonePe</option>
                    <option value="gPay">GPay</option>
                    <option value="paytm">Paytm</option>
                </select>
                <span id="paymentMethod_error" class="error-message" style="color: red; font-size: smaller;"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="wallet_withdraw_close" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary" id="depositButton">withraw</button>
            </div>
            </div>
        </div>
        </div>
    </form>
                                
    </div>

								    <div class="tab-pane fade" id="tab-address" role="tabpanel" aria-labelledby="tab-address-link">
                                        <div class="container mt-5">
                                            <a href="/Address">
                                                <button class="btn btn-primary edit-profile-btn" style="margin-left: 800px;" >Add Address</button>
                                            </a>
                                        </div>
								    	

								    	<div class="row">
								    		<div class="col-lg-6">
								    			<div class="card card-dashboard">
								    			
                                                    <h2  style="margin-left: 107px;" >ADDRESS</h2>
                                                
                                                    <% if(address.length>0) { %>

                                                        <%address.forEach((value)=>{ %>
                            
                            
                                                            <style>
                                                                .user-info {
                                                                    background-color: #ffff;
                                                                    border-radius: 5px;
                                                                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                                                                    padding: 1.5rem;
                                                                    max-width: 500px;
                                                                    margin: 0 auto;
                                                                }
                            
                                                                .user-info .row {
                                                                    margin-bottom: 0.75rem;
                                                                    display: flex;
                                                                    align-items: center;
                                                                }
                            
                                                                .user-info .row:last-child {
                                                                    margin-bottom: 0;
                                                                }
                            
                                                                .user-info .label {
                                                                    font-weight: bold;
                                                                    margin-right: 1rem;
                                                                    flex: 0 0 30%;
                                                                    max-width: 30%;
                                                                }
                            
                                                                .user-info .value {
                                                                    flex: 0 0 70%;
                                                                    max-width: 70%;
                                                                }
                            
                                                                .user-info .actions {
                                                                    text-align: right;
                                                                }
                            
                                                                .user-info .actions .btn {
                                                                    margin-left: 0.5rem;
                                                                }
                                                            </style>
                                                            <br>
                            
                                                            <div class="user-info w-50  " style="font-size: 11px;">
                                                                <div class="row  ">
                                                                    <div class="cal col-md-6">First Name:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.firstName %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Last Name:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.lastName %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Country:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.country %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Street:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.streetName %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Town:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.town %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">State:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.state %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Postcode:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.postCode %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Phone:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.phone %>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="cal col-md-6">Email:</div>
                                                                    <div class="cal col-md-6">
                                                                        <%=value.email %>
                                                                    </div>
                                                                </div>
                                                                <div class="row actions">
                                                                    <div class="">
                                                                        <a href="/editAddress?editId=<%=value._id%>" class="btn btn-primary" style="margin-right: 32px;">Edit</a>
                                                                        <a href="/deleteAddress?delId=<%=value._id%>" class="btn btn-danger" style="margin-right: 32px;" >Delete</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                            
                                                            <% }) %>
                                                                <% }else{%>
                                                                    <p style="margin-left: 104px;">NO ADDRESS</p>
                                                             <% } %>

                                                                
														
								    				</div><!-- End .card-body -->
								    			</div><!-- End .card-dashboard -->
								    </div><!-- End .col-lg-6 -->

							
								    	</div><!-- End .row -->
								    </div><!-- .End .tab-pane -->

                              
                                    
								</div>
                                
	                		</div><!-- End .col-lg-9 -->
	                	</div><!-- End .row -->
	                </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <footer class="footer">
        	<div class="footer-middle">
	            <div class="container">
	            	<div class="row">
	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget widget-about">
	            				<img src="assets/images/logo.png" class="footer-logo" alt="Footer Logo" width="105" height="25">
	            				<p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. </p>

	            				<div class="social-icons">
	            					<a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
	            					<a href="#" class="social-icon" target="_blank" title="Pinterest"><i class="icon-pinterest"></i></a>
	            				</div><!-- End .soial-icons -->
	            			</div><!-- End .widget about-widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->

	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget">
	            				<h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

	            				<ul class="widget-list">
	            					<li><a href="about.html">About Molla</a></li>
	            					<li><a href="#">How to shop on Molla</a></li>
	            					<li><a href="#">FAQ</a></li>
	            					<li><a href="contact.html">Contact us</a></li>
	            					<li><a href="login.html">Log in</a></li>
	            				</ul><!-- End .widget-list -->
	            			</div><!-- End .widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->

	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget">
	            				<h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

	            				<ul class="widget-list">
	            					<li><a href="#">Payment Methods</a></li>
	            					<li><a href="#">Money-back guarantee!</a></li>
	            					<li><a href="#">Returns</a></li>
	            					<li><a href="#">Shipping</a></li>
	            					<li><a href="#">Terms and conditions</a></li>
	            					<li><a href="#">Privacy Policy</a></li>
	            				</ul><!-- End .widget-list -->
	            			</div><!-- End .widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->

	            		<div class="col-sm-6 col-lg-3">
	            			<div class="widget">
	            				<h4 class="widget-title">My Account</h4><!-- End .widget-title -->

	            				<ul class="widget-list">
	            					<li><a href="#">Sign In</a></li>
	            					<li><a href="cart.html">View Cart</a></li>
	            					<li><a href="#">My Wishlist</a></li>
	            					<li><a href="#">Track My Order</a></li>
	            					<li><a href="#">Help</a></li>
	            				</ul><!-- End .widget-list -->
	            			</div><!-- End .widget -->
	            		</div><!-- End .col-sm-6 col-lg-3 -->
	            	</div><!-- End .row -->
	            </div><!-- End .container -->
	        </div><!-- End .footer-middle -->

	        <div class="footer-bottom">
	        	<div class="container">
	        		<p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p><!-- End .footer-copyright -->
	        		<figure class="footer-payments">
	        			<img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
	        		</figure><!-- End .footer-payments -->
	        	</div><!-- End .container -->
	        </div><!-- End .footer-bottom -->
        </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-close"></i></span>

            <form action="#" method="get" class="mobile-search">
                <label for="mobile-search" class="sr-only">Search</label>
                <input type="search" class="form-control" name="mobile-search" id="mobile-search" placeholder="Search in..." required>
                <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
            </form>
            
            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active">
                        <a href="index.html">Home</a>

                        <ul>
                            <li><a href="index-1.html">01 - furniture store</a></li>
                            <li><a href="index-2.html">02 - furniture store</a></li>
                            <li><a href="index-3.html">03 - electronic store</a></li>
                            <li><a href="index-4.html">04 - electronic store</a></li>
                            <li><a href="index-5.html">05 - fashion store</a></li>
                            <li><a href="index-6.html">06 - fashion store</a></li>
                            <li><a href="index-7.html">07 - fashion store</a></li>
                            <li><a href="index-8.html">08 - fashion store</a></li>
                            <li><a href="index-9.html">09 - fashion store</a></li>
                            <li><a href="index-10.html">10 - shoes store</a></li>
                            <li><a href="index-11.html">11 - furniture simple store</a></li>
                            <li><a href="index-12.html">12 - fashion simple store</a></li>
                            <li><a href="index-13.html">13 - market</a></li>
                            <li><a href="index-14.html">14 - market fullwidth</a></li>
                            <li><a href="index-15.html">15 - lookbook 1</a></li>
                            <li><a href="index-16.html">16 - lookbook 2</a></li>
                            <li><a href="index-17.html">17 - fashion store</a></li>
                            <li><a href="index-18.html">18 - fashion store (with sidebar)</a></li>
                            <li><a href="index-19.html">19 - games store</a></li>
                            <li><a href="index-20.html">20 - book store</a></li>
                            <li><a href="index-21.html">21 - sport store</a></li>
                            <li><a href="index-22.html">22 - tools store</a></li>
                            <li><a href="index-23.html">23 - fashion left navigation store</a></li>
                            <li><a href="index-24.html">24 - extreme sport store</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="category.html">Shop</a>
                        <ul>
                            <li><a href="category-list.html">Shop List</a></li>
                            <li><a href="category-2cols.html">Shop Grid 2 Columns</a></li>
                            <li><a href="category.html">Shop Grid 3 Columns</a></li>
                            <li><a href="category-4cols.html">Shop Grid 4 Columns</a></li>
                            <li><a href="category-boxed.html"><span>Shop Boxed No Sidebar<span class="tip tip-hot">Hot</span></span></a></li>
                            <li><a href="category-fullwidth.html">Shop Fullwidth No Sidebar</a></li>
                            <li><a href="product-category-boxed.html">Product Category Boxed</a></li>
                            <li><a href="product-category-fullwidth.html"><span>Product Category Fullwidth<span class="tip tip-new">New</span></span></a></li>
                            <li><a href="cart.html">Cart</a></li>
                            <li><a href="checkout.html">Checkout</a></li>
                            <li><a href="wishlist.html">Wishlist</a></li>
                            <li><a href="#">Lookbook</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="product.html" class="sf-with-ul">Product</a>
                        <ul>
                            <li><a href="product.html">Default</a></li>
                            <li><a href="product-centered.html">Centered</a></li>
                            <li><a href="product-extended.html"><span>Extended Info<span class="tip tip-new">New</span></span></a></li>
                            <li><a href="product-gallery.html">Gallery</a></li>
                            <li><a href="product-sticky.html">Sticky Info</a></li>
                            <li><a href="product-sidebar.html">Boxed With Sidebar</a></li>
                            <li><a href="product-fullwidth.html">Full Width</a></li>
                            <li><a href="product-masonry.html">Masonry Sticky Info</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Pages</a>
                        <ul>
                            <li>
                                <a href="about.html">About</a>

                                <ul>
                                    <li><a href="about.html">About 01</a></li>
                                    <li><a href="about-2.html">About 02</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">Contact</a>

                                <ul>
                                    <li><a href="contact.html">Contact 01</a></li>
                                    <li><a href="contact-2.html">Contact 02</a></li>
                                </ul>
                            </li>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="faq.html">FAQs</a></li>
                            <li><a href="404.html">Error 404</a></li>
                            <li><a href="coming-soon.html">Coming Soon</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="blog.html">Blog</a>

                        <ul>
                            <li><a href="blog.html">Classic</a></li>
                            <li><a href="blog-listing.html">Listing</a></li>
                            <li>
                                <a href="#">Grid</a>
                                <ul>
                                    <li><a href="blog-grid-2cols.html">Grid 2 columns</a></li>
                                    <li><a href="blog-grid-3cols.html">Grid 3 columns</a></li>
                                    <li><a href="blog-grid-4cols.html">Grid 4 columns</a></li>
                                    <li><a href="blog-grid-sidebar.html">Grid sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Masonry</a>
                                <ul>
                                    <li><a href="blog-masonry-2cols.html">Masonry 2 columns</a></li>
                                    <li><a href="blog-masonry-3cols.html">Masonry 3 columns</a></li>
                                    <li><a href="blog-masonry-4cols.html">Masonry 4 columns</a></li>
                                    <li><a href="blog-masonry-sidebar.html">Masonry sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Mask</a>
                                <ul>
                                    <li><a href="blog-mask-grid.html">Blog mask grid</a></li>
                                    <li><a href="blog-mask-masonry.html">Blog mask masonry</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Single Post</a>
                                <ul>
                                    <li><a href="single.html">Default with sidebar</a></li>
                                    <li><a href="single-fullwidth.html">Fullwidth no sidebar</a></li>
                                    <li><a href="single-fullwidth-sidebar.html">Fullwidth with sidebar</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="elements-list.html">Elements</a>
                        <ul>
                            <li><a href="elements-products.html">Products</a></li>
                            <li><a href="elements-typography.html">Typography</a></li>
                            <li><a href="elements-titles.html">Titles</a></li>
                            <li><a href="elements-banners.html">Banners</a></li>
                            <li><a href="elements-product-category.html">Product Category</a></li>
                            <li><a href="elements-video-banners.html">Video Banners</a></li>
                            <li><a href="elements-buttons.html">Buttons</a></li>
                            <li><a href="elements-accordions.html">Accordions</a></li>
                            <li><a href="elements-tabs.html">Tabs</a></li>
                            <li><a href="elements-testimonials.html">Testimonials</a></li>
                            <li><a href="elements-blog-posts.html">Blog Posts</a></li>
                            <li><a href="elements-portfolio.html">Portfolio</a></li>
                            <li><a href="elements-cta.html">Call to Action</a></li>
                            <li><a href="elements-icon-boxes.html">Icon Boxes</a></li>
                        </ul>
                    </li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">
                <a href="#" class="social-icon" target="_blank" title="Facebook"><i class="icon-facebook-f"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Twitter"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Instagram"><i class="icon-instagram"></i></a>
                <a href="#" class="social-icon" target="_blank" title="Youtube"><i class="icon-youtube"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->

    <!-- Sign in / Register Modal -->
    <div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                    </button>

                    <div class="form-box">
                        <div class="form-tab">
                            <ul class="nav nav-pills nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin" role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="false">Register</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="tab-content-5">
                                <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="signin-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="singin-email">Username or email address *</label>
                                            <input type="text" class="form-control" id="singin-email" name="singin-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="singin-password">Password *</label>
                                            <input type="password" class="form-control" id="singin-password" name="singin-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>LOG IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="signin-remember">
                                                <label class="custom-control-label" for="signin-remember">Remember Me</label>
                                            </div><!-- End .custom-checkbox -->

                                            <a href="#" class="forgot-link">Forgot Your Password?</a>
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                                <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="register-email">Your email address *</label>
                                            <input type="email" class="form-control" id="register-email" name="register-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="register-password">Password *</label>
                                            <input type="password" class="form-control" id="register-password" name="register-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>SIGN UP</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="register-policy" required>
                                                <label class="custom-control-label" for="register-policy">I agree to the <a href="#">privacy policy</a> *</label>
                                            </div><!-- End .custom-checkbox -->
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login  btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                            </div><!-- End .tab-content -->
                        </div><!-- End .form-tab -->
                    </div><!-- End .form-box -->
                </div><!-- End .modal-body -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div><!-- End .modal -->

    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>



    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
<script>
 document.getElementById('walletWithdrawForm').addEventListener('submit',function(event){
event.preventDefault();
let wallet_balance=document.getElementById('wallet_balance');
let wallet_close=document.getElementById('wallet_withdraw_close');
let amount=document.getElementById('wallet_withdraw_amount');
let paymentMethod=document.getElementById('paymentMethod_withdraw');

let amount_error=document.getElementById('wallet_amount_withdraw_error');
if(amount.value==''){
    amount_error.textContent='please enter an amount';
    return; 
}else if(parseFloat(amount.value)<=0){
    amount_error.textContent='Amount must be greater than 0'
    return;
}else if(parseFloat(amount.value)>parseFloat(wallet_balance.textContent)){
    amount_error.textContent='Amount exceeds wallet balance'
    return;

}else{
    amount_error.textContent=''
}
console.log('reach the withrowFormWallet')
axios.post('/withrowFormWallet',{
    amount:amount.value,
    paymentMethod
})
.then((response)=>{
if(response.data.success==true){
    window.location.reload()
//     Swal.fire({
//   icon: "success",
//   title: "successfully withdraw the amount",
//   text: "",
//   footer: '<a href="#">Why do I have this issue?</a>'
// });
}
})
.catch((error)=>{
console.log('enter the error',error)
})

})
</script>

<script>
    document.getElementById('walletForm').addEventListener('submit', function(event) {
      event.preventDefault();
      
      let wallet_balance = document.getElementById('wallet_balance');
      let wallet_close = document.getElementById('wallet_close');
      let amount = document.getElementById('wallet_amount');
      let paymentMethod = document.getElementById('paymentMethod');

      
      let amount_error = document.getElementById('wallet_amount_error');
      let paymentMethod_error = document.getElementById('paymentMethod_error');
  
      let current_balance = parseFloat(wallet_balance);
      let deposit_amount = parseFloat(amount.value);
  
      // Reset error messages
      amount_error.textContent = "";
      paymentMethod_error.textContent = "";
  
      // Validation checks
      if (isNaN(deposit_amount) || amount.value.trim() === '') {
        amount_error.textContent = 'Please enter a valid amount';
        return;
      } else if (deposit_amount <= 0) {
        amount_error.textContent = 'Amount must be greater than 0';
        return;
      } else if (deposit_amount > 50000) {
        amount_error.textContent = 'Amount must be less than or equal to 50,000';
        return;
      } else if (current_balance + deposit_amount > 50000) {
        amount_error.textContent = 'Deposit would exceed wallet balance limit of 50,000';
        return;
      }
  
      if (paymentMethod.value.trim() === '') {
        paymentMethod_error.textContent = 'Please select a payment method';
        return;
      }
  
      // Proceed with form submission if all validations pass
      console.log('reach the wallet')
      axios.post('/wallet', {
        amount: deposit_amount,
        paymentMethod: paymentMethod.value
    })
      .then((response) => {
        if (response.data.success==true) {
            console.log('Deposit successful');
            window.location.reload()
            // Swal.fire({
            //     icon: "success",
            //     title: "successfully add to wallet",
            //     text: "",
            //     footer: '<a href="#">Why do I have this issue?</a>'
            // });
            // Additional actions on success, if needed
        } else {
            console.log('Deposit failed');
            // Handle failure case, if needed
        }
    })
   
      .catch((error) => {
        console.log('Error during deposit', error);
      });
    });
  </script>

<script>
    if(document.getElementById('OpenId').textContent){
        setTimeout(()=>{
            document.getElementById('tab-orders-link').click()
        },500)
    }
</script>

<script>
    function viewDetail(_id){
        axios.post('/DetailView',{
            _id
        })
        .then((responced)=>{
            window.location.reload()
            console.log('enter the view detail frontend')
        })
        .catch((error)=>{
            console.log('error')
        })
    }
</script>

<script>
 	function cancel(productName ,productId){
        console.log('productName,productId',productName,productId);
    Swal.fire({
        title: "Are you sure?",
        text: `You Sure you want to cancell ${productName} from your order ? `,
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes, Cancell it!",
    }).then((result) => {
        if (result.isConfirmed) {
            console.log('enter the result')
            fetch(`/cancelProducts?productId=${productId}`, { method: 'post' })
                .then(response => response.json())
                .then(data => {
                    if (data.success==true) {
                        // Swal.fire({
                        //     title: "Product cancelled",
                        //     text: "Product cancelled Successfully",
                        //     icon: "success"
                        // }).then(() => {
                        //     window.location.reload();
                        // });
                        // $('#main-id').load('/cart #main-id');
                        window.location.reload()
                    } else {
                        Swal.fire({
                            title: "Error",
                            text: "An error occurred while deleting the cart.",
                            icon: "error"
                        }).then(() => {
                           
                        });
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    Swal.fire({
                        title: "Error",
                        text: "An error occurred while processing your request."+error,
                        icon: "error"
                    });
                });
        }
    });
}

</script>

<script>
    document.getElementById('logout').addEventListener('click', function() {
      Swal.fire({
        title: "Are you sure you want to logout?",
        text: "You will be logged out of your account.",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes, logout!",
        customClass: {
    popup: 'custom-swal-width'
  }
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = "/homeLogout";
        }
      });
    });
  </script>
                <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>

    function retry(orderAmount,id){
        console.log('enter the orderAmount',orderAmount)

        const options = {
                                    key: "rzp_test_NlKpT8z0NsaS7K",
                                    amount: orderAmount*100,
                                    currency: "INR",
                                    name: "Frenzy",
                                    description: "Test Transaction",
                                    image: "https://example.com/your_logo",
                                    order_id: null,
                                    handler: function (response) {
                                        // alert('payment success')
                                        axios.post('/verifyPayment', {
                                            orderId:id
                                        })
                                            .then(response => {
                                                console.log('payment verification response', response.data.status);
                                                if (response.data.status == true) {
                                                    console.log('enter the response data for razorepay')

                                                    window.location.href = '/successOrder'
                                                } else {
                                                    alert('payment failed')
                                                }
                                            })
                                            .catch(error => {
                                                console.log(error);
                                                alert('There was a problem while payment')
                                            })
                                    },
                                    prefill: {
                                        name: "Customer Name",
                                        email: "customer@example.com",
                                        contact: "1234567890"
                                    },
                                    notes: {
                                        address: "Customer Address"
                                    },
                                    theme: {
                                        color: "#eea287"
                                    }
                                };

                                var rzp1 = new Razorpay(options);
                                rzp1.on('payment.failed', function (response) {
                                    console.error('Payment failed:', response.error);
                                    alert('Payment failed. Please try again.');

                                    window.location.href = `/paymentFailed?orderId=${result.receipt}`
                                });
                                rzp1.open();

    }

  </script>


<!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->
</html>